{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nconst ref = {\n    inputForPickingDate: document.querySelector('#datetime-picker'),\n    countDownStartbutton: document.querySelector('button[data-start]'),\n    fieldForDays: document.querySelector('span[data-days]'),\n    fieldForHours: document.querySelector('span[data-hours]'),\n    fieldForMinutes: document.querySelector('span[data-minutes]'),\n    fieldForSeconds: document.querySelector('span[data-seconds]'),\n};\n\nlet countDownInterval;\nlet dateInFuture = 0;\nlet isActive = false;\nshowConditionInfoMessage()\nfunction addLeadingZero(value) {\n    return String(value).padStart(2, '0');\n};\nfunction showWarningMessage() {\n    iziToast.warning({\n        color: 'red',\n    message: 'Please choose a date in the future',\n    position: 'topCenter',\n    });\n};\nfunction showConditionInfoMessage() {\n    iziToast.info({\n    title: '',\n    message: 'PLEASE, CHOOSE DATE IN THE FUTURE AND THEN PRESS \"Start\" BUTTON TO START COUNTDOWN',\n        position: 'topCenter',\n    timeout:false,\n});\n}\nfunction showActiveCountDownInfoMessage() {\n    iziToast.info({\n    title: '',\n    message: 'RESTART THE PAGE TO START NEW COUNTDOWN! OR WAIT TILL THE END OF CURRENT COUNTDOWN!',\n        position: 'topCenter',\n    timeout:false,\n});\n}\nfunction onCountDownStartButtonClick() {\n    ref.countDownStartbutton.setAttribute(\"disabled\", \"true\");\n    ref.inputForPickingDate.setAttribute(\"disabled\", \"true\");\n    ref.countDownStartbutton.classList.remove('is-active');\n    isActive = true;\n    iziToast.destroy();\n    showActiveCountDownInfoMessage();\n    let futureDate = dateInFuture;\n    let dif = futureDate-new Date();\n    console.log(dif);\n    countDownInterval = setInterval(() => {\n        dif = dif - 1000;\n            if (dif <= 0) {\n                clearInterval(countDownInterval);\n                isActive = false;\n                ref.inputForPickingDate.removeAttribute(\"disabled\");\n                iziToast.destroy();\n                showConditionInfoMessage();\n\n            }\n        else {\n            fillInTimeFields(dif);\n        }\n    },1000)\n\n};\nfunction fillInTimeFields(differ) {\n    const { days, hours, minutes, seconds } = convertMs(differ);\n    ref.fieldForDays.textContent = `${addLeadingZero(days)}`;\n    ref.fieldForHours.textContent = `${addLeadingZero(hours)}`;\n    ref.fieldForMinutes.textContent = `${addLeadingZero(minutes)}`;\n    ref.fieldForSeconds.textContent = `${addLeadingZero(seconds)}`;\n}\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n    onClose(selectedDates) {\n        if (new Date() >= selectedDates[0] && !isActive)\n        { \n        ref.countDownStartbutton.setAttribute(\"disabled\", \"true\");    \n            ref.countDownStartbutton.classList.remove('is-active');\n            iziToast.destroy();\n        showWarningMessage();\n                };\n        if (new Date() < selectedDates[0] && !isActive) {\n            dateInFuture = selectedDates[0];\n            ref.countDownStartbutton.classList.add('is-active');\n            ref.countDownStartbutton.removeAttribute(\"disabled\");\n            ref.countDownStartbutton.addEventListener('click', onCountDownStartButtonClick);\n        };\n        if (isActive) { showErrorMessage() };\n    },\n    \n};\nflatpickr(ref.inputForPickingDate, options);\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes =Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  return { days, hours, minutes, seconds };\n}\n\n"],"names":["ref","countDownInterval","dateInFuture","isActive","showConditionInfoMessage","addLeadingZero","value","showWarningMessage","iziToast","showActiveCountDownInfoMessage","onCountDownStartButtonClick","dif","fillInTimeFields","differ","days","hours","minutes","seconds","convertMs","options","selectedDates","flatpickr","ms"],"mappings":"2GAIA,MAAMA,EAAM,CACR,oBAAqB,SAAS,cAAc,kBAAkB,EAC9D,qBAAsB,SAAS,cAAc,oBAAoB,EACjE,aAAc,SAAS,cAAc,iBAAiB,EACtD,cAAe,SAAS,cAAc,kBAAkB,EACxD,gBAAiB,SAAS,cAAc,oBAAoB,EAC5D,gBAAiB,SAAS,cAAc,oBAAoB,CAChE,EAEA,IAAIC,EACAC,EAAe,EACfC,EAAW,GACfC,EAA0B,EAC1B,SAASC,EAAeC,EAAO,CAC3B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACxC,CACA,SAASC,GAAqB,CAC1BC,EAAS,QAAQ,CACb,MAAO,MACX,QAAS,qCACT,SAAU,WACd,CAAK,CACL,CACA,SAASJ,GAA2B,CAChCI,EAAS,KAAK,CACd,MAAO,GACP,QAAS,qFACL,SAAU,YACd,QAAQ,EACZ,CAAC,CACD,CACA,SAASC,GAAiC,CACtCD,EAAS,KAAK,CACd,MAAO,GACP,QAAS,sFACL,SAAU,YACd,QAAQ,EACZ,CAAC,CACD,CACA,SAASE,GAA8B,CACnCV,EAAI,qBAAqB,aAAa,WAAY,MAAM,EACxDA,EAAI,oBAAoB,aAAa,WAAY,MAAM,EACvDA,EAAI,qBAAqB,UAAU,OAAO,WAAW,EACrDG,EAAW,GACXK,EAAS,QAAO,EAChBC,IAEA,IAAIE,EADaT,EACI,IAAI,KACzB,QAAQ,IAAIS,CAAG,EACfV,EAAoB,YAAY,IAAM,CAClCU,EAAMA,EAAM,IACJA,GAAO,GACP,cAAcV,CAAiB,EAC/BE,EAAW,GACXH,EAAI,oBAAoB,gBAAgB,UAAU,EAClDQ,EAAS,QAAO,EAChBJ,KAIJQ,EAAiBD,CAAG,CAE3B,EAAC,GAAI,CAEV,CACA,SAASC,EAAiBC,EAAQ,CAC9B,KAAM,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUL,CAAM,EAC1Db,EAAI,aAAa,YAAc,GAAGK,EAAeS,CAAI,CAAC,GACtDd,EAAI,cAAc,YAAc,GAAGK,EAAeU,CAAK,CAAC,GACxDf,EAAI,gBAAgB,YAAc,GAAGK,EAAeW,CAAO,CAAC,GAC5DhB,EAAI,gBAAgB,YAAc,GAAGK,EAAeY,CAAO,CAAC,EAChE,CAEA,MAAME,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACf,QAAQC,EAAe,CACf,IAAI,MAAUA,EAAc,CAAC,GAAK,CAACjB,IAEvCH,EAAI,qBAAqB,aAAa,WAAY,MAAM,EACpDA,EAAI,qBAAqB,UAAU,OAAO,WAAW,EACrDQ,EAAS,QAAO,EACpBD,KAEI,IAAI,KAASa,EAAc,CAAC,GAAK,CAACjB,IAClCD,EAAekB,EAAc,CAAC,EAC9BpB,EAAI,qBAAqB,UAAU,IAAI,WAAW,EAClDA,EAAI,qBAAqB,gBAAgB,UAAU,EACnDA,EAAI,qBAAqB,iBAAiB,QAASU,CAA2B,GAE9EP,GAAY,iBAAgB,CACnC,CAEL,EACAkB,EAAUrB,EAAI,oBAAqBmB,CAAO,EAE1C,SAASD,EAAUI,EAAI,CAKrB,MAAMR,EAAO,KAAK,MAAMQ,EAAK,KAAG,EAC1BP,EAAQ,KAAK,MAAOO,EAAK,MAAO,IAAI,EACpCN,EAAS,KAAK,MAAQM,EAAK,MAAO,KAAQ,GAAM,EAChDL,EAAU,KAAK,MAASK,EAAK,MAAO,KAAQ,IAAU,GAAM,EAClE,MAAO,CAAE,KAAAR,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}